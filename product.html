<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Product Details - FinGaurd Water Purifiers</title>

		<!-- Tailwind CSS -->
		<script src="https://cdn.tailwindcss.com"></script>
		<script>
			tailwind.config = {
				theme: {
					extend: {
						colors: {
							primary: '#1e40af',
							'primary-dark': '#1e3a8a',
							secondary: '#3b82f6'
						},
						fontFamily: {
							display: ['Inter', 'sans-serif'],
							body: ['Inter', 'sans-serif']
						}
					}
				}
			}
		</script>

		<!-- Google Material Icons -->
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

		<!-- Custom CSS -->
		<link rel="stylesheet" href="css/style.css" />

		<style>
			/* Loading skeleton animation */
			@keyframes shimmer {
				0% { background-position: -1000px 0; }
				100% { background-position: 1000px 0; }
			}
			.skeleton {
				background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
				background-size: 1000px 100%;
				animation: shimmer 2s infinite;
			}
		</style>
	</head>
	<body class="font-body text-gray-900 bg-gray-50">
		<header></header>

		<main class="pt-20">
			<!-- Loading State -->
			<div id="loading-state" class="min-h-screen flex items-center justify-center">
				<div class="text-center">
					<div class="inline-block animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent"></div>
					<p class="mt-4 text-gray-600 font-medium">Loading product details...</p>
				</div>
			</div>

			<!-- Product Not Found -->
			<div id="not-found-state" class="hidden min-h-screen flex items-center justify-center">
				<div class="text-center max-w-md mx-auto px-4">
					<span class="material-symbols-rounded text-9xl text-gray-300 mb-4 block">error_outline</span>
					<h2 class="text-3xl font-bold text-gray-900 mb-4">Product Not Found</h2>
					<p class="text-gray-600 mb-8">The product you're looking for doesn't exist or has been removed.</p>
					<a href="/products.html" class="inline-flex items-center gap-2 px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors">
						<span class="material-symbols-rounded">arrow_back</span>
						Back to Products
					</a>
				</div>
			</div>

			<!-- Product Content -->
			<div id="product-content" class="hidden">
				<!-- Breadcrumb -->
				<section class="bg-white border-b border-gray-200">
					<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
						<nav class="flex items-center gap-2 text-sm">
							<a href="/index.html" class="text-gray-500 hover:text-primary transition-colors">Home</a>
							<span class="material-symbols-rounded text-gray-400 text-sm">chevron_right</span>
							<a href="/products.html" class="text-gray-500 hover:text-primary transition-colors">Products</a>
							<span class="material-symbols-rounded text-gray-400 text-sm">chevron_right</span>
							<span id="breadcrumb-category" class="text-gray-500 hover:text-primary transition-colors cursor-pointer">Category</span>
							<span class="material-symbols-rounded text-gray-400 text-sm">chevron_right</span>
							<span id="breadcrumb-name" class="text-gray-700 font-medium">Product</span>
						</nav>
					</div>
				</section>

				<!-- Product Details -->
				<section class="py-8 lg:py-12">
					<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
						<div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12">
							<!-- Product Image -->
							<div class="space-y-4">
								<div class="relative bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden aspect-square">
									<img id="product-image" src="" alt="" class="w-full h-full object-contain p-8" />
									<div id="product-badge" class="absolute top-4 right-4"></div>
								</div>
								
								<!-- Quick Actions -->
								<div class="grid grid-cols-2 gap-4">
									<button class="flex items-center justify-center gap-2 px-4 py-3 bg-white border border-gray-300 rounded-lg hover:border-primary hover:text-primary transition-colors">
										<span class="material-symbols-rounded">share</span>
										<span class="font-medium">Share</span>
									</button>
									<button class="flex items-center justify-center gap-2 px-4 py-3 bg-white border border-gray-300 rounded-lg hover:border-primary hover:text-primary transition-colors">
										<span class="material-symbols-rounded">favorite_border</span>
										<span class="font-medium">Save</span>
									</button>
								</div>
							</div>

							<!-- Product Info -->
							<div class="space-y-6">
								<!-- Header -->
								<div>
									<div class="flex items-center gap-2 mb-2">
										<span id="product-sku" class="text-sm text-gray-500 font-mono">SKU-0000</span>
										<span class="w-1 h-1 bg-gray-300 rounded-full"></span>
										<span id="product-stock" class="text-sm text-green-600 font-medium">In Stock</span>
									</div>
									<h1 id="product-name" class="text-3xl lg:text-4xl font-bold text-gray-900 mb-3">Product Name</h1>
									<p id="product-description" class="text-gray-600 leading-relaxed">Product description...</p>
								</div>

								<!-- Tags -->
								<div id="product-tags" class="flex flex-wrap gap-2"></div>

								<!-- Price & CTA -->
								<div class="bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6">
									<div class="flex items-end gap-3 mb-4">
										<span class="text-4xl font-bold text-primary">₹<span id="product-price">0</span></span>
										<span class="text-gray-500 line-through text-lg">₹<span id="product-mrp">0</span></span>
										<span id="product-discount" class="px-3 py-1 bg-green-500 text-white text-sm font-bold rounded-full"></span>
									</div>
									<p class="text-sm text-gray-600 mb-4">Inclusive of all taxes • Free Installation</p>
									<div class="flex flex-col sm:flex-row gap-3">
										<button id="add-to-cart-btn" data-cart-feedback class="flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-primary text-white rounded-lg hover:bg-primary-dark transition-all hover:shadow-lg group">
											<span class="material-symbols-rounded">shopping_cart</span>
											<span class="font-semibold">Add to Cart</span>
										</button>
										<button class="px-6 py-4 bg-white border-2 border-primary text-primary rounded-lg hover:bg-primary hover:text-white transition-all">
											<span class="material-symbols-rounded">call</span>
										</button>
									</div>
								</div>

								<!-- Key Features -->
								<div class="bg-white border border-gray-200 rounded-xl p-6">
									<h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center gap-2">
										<span class="material-symbols-rounded text-primary">verified</span>
										Key Highlights
									</h3>
									<div id="key-highlights" class="grid grid-cols-1 sm:grid-cols-2 gap-3">
										<!-- Dynamic content -->
									</div>
								</div>
							</div>
						</div>

						<!-- Detailed Information Tabs -->
						<div class="mt-12">
							<div class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden">
								<!-- Tab Headers -->
								<div class="border-b border-gray-200 overflow-x-auto">
									<nav class="flex min-w-max">
										<button class="tab-button active px-6 py-4 text-sm font-semibold border-b-2 border-primary text-primary transition-colors" data-tab="specifications">
											<span class="flex items-center gap-2">
												<span class="material-symbols-rounded text-lg">settings</span>
												Specifications
											</span>
										</button>
										<button class="tab-button px-6 py-4 text-sm font-semibold border-b-2 border-transparent text-gray-600 hover:text-gray-900 transition-colors" data-tab="features">
											<span class="flex items-center gap-2">
												<span class="material-symbols-rounded text-lg">star</span>
												Features
											</span>
										</button>
										<button class="tab-button px-6 py-4 text-sm font-semibold border-b-2 border-transparent text-gray-600 hover:text-gray-900 transition-colors" data-tab="water-quality">
											<span class="flex items-center gap-2">
												<span class="material-symbols-rounded text-lg">water_drop</span>
												Water Quality
											</span>
										</button>
										<button class="tab-button px-6 py-4 text-sm font-semibold border-b-2 border-transparent text-gray-600 hover:text-gray-900 transition-colors" data-tab="warranty">
											<span class="flex items-center gap-2">
												<span class="material-symbols-rounded text-lg">verified_user</span>
												Warranty & Support
											</span>
										</button>
									</nav>
								</div>

								<!-- Tab Content -->
								<div class="p-6 lg:p-8">
									<!-- Specifications Tab -->
									<div id="tab-specifications" class="tab-content">
										<h3 class="text-2xl font-bold text-gray-900 mb-6">Technical Specifications</h3>
										<div id="specifications-content" class="grid grid-cols-1 md:grid-cols-2 gap-4">
											<!-- Dynamic content -->
										</div>
									</div>

									<!-- Features Tab -->
									<div id="tab-features" class="tab-content hidden">
										<h3 class="text-2xl font-bold text-gray-900 mb-6">Features & Capabilities</h3>
										<div id="features-content" class="space-y-6">
											<!-- Dynamic content -->
										</div>
									</div>

									<!-- Water Quality Tab -->
									<div id="tab-water-quality" class="tab-content hidden">
										<h3 class="text-2xl font-bold text-gray-900 mb-6">Water Quality Parameters</h3>
										<div id="water-quality-content" class="grid grid-cols-1 md:grid-cols-2 gap-6">
											<!-- Dynamic content -->
										</div>
									</div>

									<!-- Warranty Tab -->
									<div id="tab-warranty" class="tab-content hidden">
										<h3 class="text-2xl font-bold text-gray-900 mb-6">Warranty & Support</h3>
										<div id="warranty-content" class="space-y-6">
											<!-- Dynamic content -->
										</div>
									</div>
								</div>
							</div>
						</div>

						<!-- Related Products -->
						<div class="mt-12">
							<div class="flex items-center justify-between mb-6">
								<h2 class="text-2xl lg:text-3xl font-bold text-gray-900">Related Products</h2>
								<a href="/products.html" class="text-primary hover:text-primary-dark font-semibold flex items-center gap-1 group">
									View All
									<span class="material-symbols-rounded group-hover:translate-x-1 transition-transform">arrow_forward</span>
								</a>
							</div>
							<div id="related-products" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
								<!-- Dynamic content -->
							</div>
						</div>
					</div>
				</section>
			</div>
		</main>

		<footer></footer>

		<!-- Product Loading Script -->
		<script>
			let currentProduct = null;
			let allProducts = [];

			// Get product ID from URL
			function getProductId() {
				const urlParams = new URLSearchParams(window.location.search);
				return urlParams.get('id');
			}

			// Load product data
			async function loadProduct() {
				try {
					const productId = getProductId();
					
					if (!productId) {
						showNotFound();
						return;
					}

					const response = await fetch('/data/products.json');
					allProducts = await response.json();
					
					currentProduct = allProducts.find(p => p.id === parseInt(productId));
					
					if (!currentProduct) {
						showNotFound();
						return;
					}

					displayProduct(currentProduct);
					displayRelatedProducts(currentProduct);
					
					document.getElementById('loading-state').style.display = 'none';
					document.getElementById('product-content').classList.remove('hidden');
					
				} catch (error) {
					console.error('Failed to load product:', error);
					showNotFound();
				}
			}

			// Show not found state
			function showNotFound() {
				document.getElementById('loading-state').style.display = 'none';
				document.getElementById('not-found-state').classList.remove('hidden');
			}

			// Display product details
			function displayProduct(product) {
				// Update document title
				document.title = `${product.name} - FinGaurd`;

				// Breadcrumb
				document.getElementById('breadcrumb-category').textContent = product.category;
				document.getElementById('breadcrumb-category').onclick = () => {
					window.location.href = `/products.html?category=${encodeURIComponent(product.category)}`;
				};
				document.getElementById('breadcrumb-name').textContent = product.name;

				// Basic Info
				document.getElementById('product-image').src = product.image || 'assets/images/placeholder.jpg';
				document.getElementById('product-image').alt = product.name;
				document.getElementById('product-name').textContent = product.name;
				document.getElementById('product-sku').textContent = product.sku;
				document.getElementById('product-description').textContent = product.description;

				// Badge
				const badgeColor = getCategoryBadgeColor(product.category);
				document.getElementById('product-badge').innerHTML = `
					<span class="inline-flex items-center gap-1 px-3 py-1.5 ${badgeColor} text-white text-xs font-bold rounded-full shadow-lg">
						<span class="material-symbols-rounded text-sm">verified</span>
						${product.category}
					</span>
				`;

				// Tags
				if (product.tags && product.tags.length > 0) {
					document.getElementById('product-tags').innerHTML = product.tags.map(tag => `
						<span class="px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full border border-gray-200">
							${tag}
						</span>
					`).join('');
				}

				// Price
				const mrp = Math.round(product.price * 1.2);
				const discount = Math.round(((mrp - product.price) / mrp) * 100);
				document.getElementById('product-price').textContent = product.price.toLocaleString('en-IN');
				document.getElementById('product-mrp').textContent = mrp.toLocaleString('en-IN');
				document.getElementById('product-discount').textContent = `${discount}% OFF`;

				// Key Highlights
				const highlights = [];
				if (product.specifications?.storageCapacity) highlights.push({ icon: 'water', text: product.specifications.storageCapacity });
				if (product.specifications?.purificationStages) highlights.push({ icon: 'filter_alt', text: `${product.specifications.purificationStages} Stages` });
				if (product.specifications?.purificationTechnology) highlights.push({ icon: 'science', text: product.specifications.purificationTechnology.join('+') });
				if (product.specifications?.warrantyPeriod) highlights.push({ icon: 'verified_user', text: product.specifications.warrantyPeriod });

				document.getElementById('key-highlights').innerHTML = highlights.map(h => `
					<div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200">
						<span class="material-symbols-rounded text-primary text-xl">${h.icon}</span>
						<span class="text-sm font-medium text-gray-700">${h.text}</span>
					</div>
				`).join('');

				// Specifications
				if (product.specifications) {
					document.getElementById('specifications-content').innerHTML = Object.entries(product.specifications)
						.map(([key, value]) => {
							const displayKey = key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
							let displayValue = value;
							
							if (Array.isArray(value)) {
								displayValue = value.join(', ');
							} else if (typeof value === 'boolean') {
								displayValue = value ? 'Yes' : 'No';
							}
							
							return `
								<div class="flex items-start gap-3 p-4 bg-gray-50 rounded-lg border border-gray-200">
									<span class="material-symbols-rounded text-primary text-xl flex-shrink-0">check_circle</span>
									<div>
										<div class="font-semibold text-gray-900">${displayKey}</div>
										<div class="text-sm text-gray-600 mt-1">${displayValue}</div>
									</div>
								</div>
							`;
						}).join('');
				}

				// Features
				if (product.features) {
					const featureGroups = Object.entries(product.features).map(([key, items]) => {
						const displayKey = key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
						const icon = key.includes('removal') ? 'shield' : key.includes('smart') ? 'psychology' : key.includes('safety') ? 'security' : 'build';
						
						return `
							<div class="bg-gray-50 rounded-lg border border-gray-200 p-6">
								<h4 class="font-bold text-gray-900 mb-4 flex items-center gap-2">
									<span class="material-symbols-rounded text-primary">${icon}</span>
									${displayKey}
								</h4>
								<ul class="space-y-2">
									${items.map(item => `
										<li class="flex items-start gap-2 text-gray-700">
											<span class="material-symbols-rounded text-green-500 text-sm mt-0.5">check</span>
											<span class="text-sm">${item}</span>
										</li>
									`).join('')}
								</ul>
							</div>
						`;
					}).join('');
					
					document.getElementById('features-content').innerHTML = featureGroups;
				}

				// Water Quality
				if (product.waterQuality) {
					document.getElementById('water-quality-content').innerHTML = Object.entries(product.waterQuality)
						.map(([key, value]) => {
							const displayKey = key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
							
							return `
								<div class="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg border border-blue-200 p-6">
									<div class="flex items-center justify-between mb-2">
										<span class="text-sm font-medium text-gray-600">${displayKey}</span>
										<span class="material-symbols-rounded text-blue-500">water_drop</span>
									</div>
									<div class="text-2xl font-bold text-blue-600">${value}</div>
								</div>
							`;
						}).join('');
				} else {
					document.getElementById('water-quality-content').innerHTML = `
						<div class="col-span-2 text-center text-gray-500 py-8">
							<span class="material-symbols-rounded text-6xl text-gray-300 mb-2 block">info</span>
							Water quality parameters not available for this product.
						</div>
					`;
				}

				// Warranty
				const warrantyContent = `
					<div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border border-green-200 p-6">
						<div class="flex items-start gap-4">
							<span class="material-symbols-rounded text-green-600 text-4xl">verified_user</span>
							<div>
								<h4 class="font-bold text-gray-900 text-lg mb-2">Comprehensive Warranty</h4>
								<p class="text-gray-700">${product.specifications?.warrantyPeriod || '1 Year comprehensive warranty'}</p>
								<p class="text-sm text-gray-600 mt-2">Service life: ${product.specifications?.serviceLife || '8-10 years'}</p>
							</div>
						</div>
					</div>
					
					<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
						<div class="bg-white rounded-lg border border-gray-200 p-6">
							<span class="material-symbols-rounded text-primary text-3xl mb-3 block">support_agent</span>
							<h4 class="font-bold text-gray-900 mb-2">24/7 Support</h4>
							<p class="text-sm text-gray-600">Round-the-clock customer support for all your queries and issues.</p>
						</div>
						
						<div class="bg-white rounded-lg border border-gray-200 p-6">
							<span class="material-symbols-rounded text-primary text-3xl mb-3 block">handyman</span>
							<h4 class="font-bold text-gray-900 mb-2">Free Installation</h4>
							<p class="text-sm text-gray-600">Professional installation included with every purchase at no extra cost.</p>
						</div>
						
						<div class="bg-white rounded-lg border border-gray-200 p-6">
							<span class="material-symbols-rounded text-primary text-3xl mb-3 block">autorenew</span>
							<h4 class="font-bold text-gray-900 mb-2">Easy Replacement</h4>
							<p class="text-sm text-gray-600">Hassle-free replacement within warranty period if needed.</p>
						</div>
						
						<div class="bg-white rounded-lg border border-gray-200 p-6">
							<span class="material-symbols-rounded text-primary text-3xl mb-3 block">local_shipping</span>
							<h4 class="font-bold text-gray-900 mb-2">Genuine Parts</h4>
							<p class="text-sm text-gray-600">Only authentic FinGaurd parts used in all services and repairs.</p>
						</div>
					</div>
				`;
			
			document.getElementById('warranty-content').innerHTML = warrantyContent;

			// Add to cart functionality
			document.getElementById('add-to-cart-btn').addEventListener('click', () => {
				Cart.addItem(product.id, product.name, product.sku, product.price, product.image, 1);
			});
		}

		// Display related products
		function displayRelatedProducts(product) {
				const related = allProducts
					.filter(p => p.id !== product.id && p.category === product.category)
					.slice(0, 4);

				if (related.length === 0) {
					document.getElementById('related-products').innerHTML = `
						<div class="col-span-full text-center text-gray-500 py-8">
							<span class="material-symbols-rounded text-6xl text-gray-300 mb-2 block">inventory_2</span>
							No related products found.
						</div>
					`;
					return;
				}

				document.getElementById('related-products').innerHTML = related.map(p => `
					<a href="/product.html?id=${p.id}" class="group relative bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md hover:-translate-y-1 overflow-hidden flex flex-col">
						<div class="relative aspect-square bg-gray-50 overflow-hidden">
							<img src="${p.image}" alt="${p.name}" class="w-full h-full object-contain p-6 group-hover:scale-110 transition-transform duration-300" />
							<span class="absolute top-3 left-3 px-2 py-1 ${getCategoryBadgeColor(p.category)} text-white text-xs font-bold rounded-full shadow">
								${p.category}
							</span>
						</div>
						<div class="relative p-6 bg-white z-10 flex flex-col flex-1">
							<h3 class="font-bold text-gray-900 mb-2 group-hover:text-primary transition-colors line-clamp-2">${p.name}</h3>
							<p class="text-sm text-gray-600 mb-4 line-clamp-2 flex-1">${p.description}</p>
							<div class="flex items-center justify-between mt-auto">
								<span class="text-2xl font-bold text-primary">₹${p.price.toLocaleString('en-IN')}</span>
								<span class="material-symbols-rounded text-primary group-hover:translate-x-1 transition-transform">arrow_forward</span>
							</div>
						</div>
					</a>
				`).join('');
			}

			// Category badge color
			function getCategoryBadgeColor(category) {
				const colors = {
					'RO Systems': 'bg-gradient-to-r from-blue-500 to-blue-600',
					'Filters': 'bg-gradient-to-r from-green-500 to-green-600',
					'Parts': 'bg-gradient-to-r from-purple-500 to-purple-600',
					'Accessories': 'bg-gradient-to-r from-orange-500 to-orange-600'
				};
				return colors[category] || 'bg-gradient-to-r from-gray-500 to-gray-600';
			}

			// Tab switching
			function setupTabs() {
				const tabButtons = document.querySelectorAll('.tab-button');
				const tabContents = document.querySelectorAll('.tab-content');

				tabButtons.forEach(button => {
					button.addEventListener('click', () => {
						const targetTab = button.dataset.tab;

						// Update buttons
						tabButtons.forEach(btn => {
							btn.classList.remove('active', 'border-primary', 'text-primary');
							btn.classList.add('border-transparent', 'text-gray-600');
						});
						button.classList.add('active', 'border-primary', 'text-primary');
						button.classList.remove('border-transparent', 'text-gray-600');

						// Update content
						tabContents.forEach(content => {
							content.classList.add('hidden');
						});
						document.getElementById(`tab-${targetTab}`).classList.remove('hidden');
					});
				});
			}

			// Initialize
			document.addEventListener('DOMContentLoaded', () => {
				loadProduct();
				setupTabs();
			});
		</script>

		<!-- Cart Logic -->
		<script src="js/cart.js"></script>

		<!-- Load Header and Footer -->
		<script src="js/jquery.js"></script>
		<script>
			$(function() {
				$('header').load('components/header.html');
				$('footer').load('components/footer.html');
			});
		</script>
	</body>
</html>
